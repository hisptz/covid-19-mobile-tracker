<!--
*
* Copyright 2015 HISP Tanzania
*
* This program is free software; you can redistribute it and/or modify
* it under the terms of the GNU General Public License as published by
* the Free Software Foundation; either version 2 of the License, or
* (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* You should have received a copy of the GNU General Public License
* along with this program; if not, write to the Free Software
* Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
* MA 02110-1301, USA.
*
* @since 2015
* @author Joseph Chingalo profschingalo@gmail.com>
*
*
-->
<div *ngIf="!isLoading && trackedEntityAttribute" class="ion-padding-top">
  <div *ngIf="trackedEntityAttribute.optionSet"
    [ngClass]="(trackedEntityAttributesSavingStatusClass[trackedEntityAttribute.id +'-trackedEntityAttribute'])?trackedEntityAttributesSavingStatusClass[trackedEntityAttribute.id +'-trackedEntityAttribute']:'input-field-container'">
    <app-option-set-input [dataEntrySettings]="dataEntrySettings" (optionSetChange)="updateValue($event)"
      [dataElementId]="trackedEntityAttribute.id" [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data"
      [options]="trackedEntityAttribute.optionSet.options" [label]="fieldLabelKey">
    </app-option-set-input>
  </div>
  <div *ngIf="!trackedEntityAttribute.optionSet"
    [ngClass]="(trackedEntityAttributesSavingStatusClass[trackedEntityAttribute.id +'-trackedEntityAttribute'])?trackedEntityAttributesSavingStatusClass[trackedEntityAttribute.id +'-trackedEntityAttribute']:'input-field-container'">
    <div *ngIf="textInputField.indexOf(trackedEntityAttribute.valueType) > -1">
      <app-text-input (change)="updateValue($event)" [dataElementId]="trackedEntityAttribute.id"
        [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data" [barcodeSettings]="barcodeSettings"
        [valueType]="trackedEntityAttribute.valueType" [label]="fieldLabelKey">
      </app-text-input>
    </div>
    <div *ngIf="numericalInputField.indexOf(trackedEntityAttribute.valueType) > -1">
      <app-numerical-input (numericalValueChange)="updateValue($event)" [dataElementId]="trackedEntityAttribute.id"
        [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data" [barcodeSettings]="barcodeSettings"
        [valueType]="trackedEntityAttribute.valueType" [label]="fieldLabelKey">
      </app-numerical-input>
    </div>
    <div
      *ngIf="trackedEntityAttribute.valueType === 'DATE' || trackedEntityAttribute.valueType === 'DATETIME' || trackedEntityAttribute.valueType === 'TIME' ">
      <app-date-input (valueChange)="updateValue($event)" [valueType]="trackedEntityAttribute.valueType"
        [dataElementId]="trackedEntityAttribute.id" [label]="fieldLabelKey"
        [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data">
      </app-date-input>
    </div>
    <div *ngIf="trackedEntityAttribute.valueType === 'TRUE_ONLY'">
      <app-true-only-input (valueChange)="updateValue($event)" [dataElementId]="trackedEntityAttribute.id"
        [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data" [label]="fieldLabelKey">
      </app-true-only-input>
    </div>
    <div *ngIf="trackedEntityAttribute.valueType === 'AGE'">
      <app-age-input (ageChange)="updateValue($event)" [dataElementId]="trackedEntityAttribute.id"
        [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data" [label]="fieldLabelKey">
      </app-age-input>
    </div>
    <div *ngIf="trackedEntityAttribute.valueType === 'BOOLEAN'">
      <app-boolean-input (valueChange)="updateValue($event)" [label]="fieldLabelKey" [dataElementId]="trackedEntityAttribute.id"
        [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data">
      </app-boolean-input>
    </div>
    <div *ngIf="trackedEntityAttribute.valueType === 'COORDINATE'">
      <div >
        <ion-label >{{ fieldLabelKey }}</ion-label>
      </div>
      <app-coordinate-input (coordinateChange)="updateValue($event)" [dataElementId]="trackedEntityAttribute.id"
        [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data">
      </app-coordinate-input>
    </div>
    <div *ngIf="trackedEntityAttribute.valueType === 'ORGANISATION_UNIT'">
      <div >
        <ion-label >{{ fieldLabelKey }}</ion-label>
      </div>
      <app-organisation-unit-input (organisationUnitChange)="updateValue($event)"
        [dataElementId]="trackedEntityAttribute.id" [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data">
      </app-organisation-unit-input>
    </div>
    <div *ngIf="trackedEntityAttribute.valueType === 'UNIT_INTERVAL'">
    <div >
        <ion-label >{{ fieldLabelKey }}</ion-label>
      </div>
      <app-unit-interval-input (unitIntervalChange)="updateValue($event)" [dataElementId]="trackedEntityAttribute.id"
        [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data">
      </app-unit-interval-input>
    </div>
    <div *ngIf="trackedEntityAttribute.valueType === 'PERCENTAGE'">
    <div >
        <ion-label >{{ fieldLabelKey }}</ion-label>
      </div>
      <app-percentage-input (percentageChange)="updateValue($event)" [dataElementId]="trackedEntityAttribute.id"
        [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data">
      </app-percentage-input>
    </div>
    <div *ngIf="trackedEntityAttribute.valueType === 'EMAIL'">
      <app-email-input (emailChange)="updateValue($event)" [label]="fieldLabelKey"
        [(dataValuesSavingStatusClass)]="trackedEntityAttributesSavingStatusClass"
        [dataElementId]="trackedEntityAttribute.id" [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data">
      </app-email-input>
    </div>
    <div *ngIf="trackedEntityAttribute.valueType === 'PHONE_NUMBER'">
      <app-phone-number-input (phoneNumberChange)="updateValue($event)"
        [(dataValuesSavingStatusClass)]="trackedEntityAttributesSavingStatusClass"
        [dataElementId]="trackedEntityAttribute.id" [categoryOptionComboId]="'trackedEntityAttribute'" [lockingFieldStatus]="isDisabled" [data]="data"
        [label]="fieldLabelKey">
      </app-phone-number-input>
    </div>

    <div *ngIf="supportValueTypes.indexOf(trackedEntityAttribute.valueType) === -1">
      <div padding>
        Currently '{{ trackedEntityAttribute.valueType.toLocaleLowerCase().replace('/_/g',' ')}}' as value type is not
        supported
      </div>
    </div>
  </div>
</div>
